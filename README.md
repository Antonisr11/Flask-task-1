# 1η υποχρεωτική εργασία εξαμήνου

-- Δεν είναι ακόμα έτοιμο. Σύντομα κοντά σας ---

## Περιεχόμενα 
* [Γενικά](#General)
* [Ερώτημα 1](#Task_1) 
* [Ερώτημα 2](#Task_2)
* [Ερώτημα 3](#Task_3)
* [Ερώτημα 4](#Task_4)
* [Ερώτημα 5](#Task_5)
* [Ερώτημα 6](#Task_6)
* [Ερώτημα 7](#Task_7)
* [Ερώτημα 8](#Task_8)
* [Ερώτημα 9](#Task_9)

## General
Το προγραμμά διαχειρίζεται μέσω flask μία βάση δεδομένων που κρατάει στοιχεία για κάποιους μαθητές. Η βάση δεδομένων υλοποιείται μέσω της MongoDB.

## Task_1
### ΕΡΩΤΗΜΑ 1: Δημιουργία χρήστη
Αρχικά ελέγχουμε αν υπάρχει χρήστης με το ίδιο username. Αυτό το υλοποιούμε με το να μετράμε τους users που έχουν έχουν το username που πήραμε σαν όρισμα.
-> Αν ο αριθμός αυτός βγει 0 τότε εισάγουμε τον user στην βάση δεδομένων και επιστρέφεται μήνυμα που ενημερώνει τον χρήστη για την επιτυχή εισαγωγή
-> Αν δεν βγει 0, εμφανίζεται μήνυμα λάθους καθώς υπάρχει ήδη κάποιος στην βάση με αυτό το username

## Task_2
### ΕΡΩΤΗΜΑ 2: Login στο σύστημα
Σε αυτή την συνάρτηση θέλουμε να ελέγξουμε αν υπάρχει κάποιος χρήστης με το username και το password που λάβαμε σαν όρισμα. Ακολουθούμε την ίδια νοοτροπία με το ερώτημα 1, δηλαδή μετράμε πόσους users έχει η βάση με αυτά τα στοιχεία (χρησιμοποιουμε and καθώς θέλουμε ίδιο username και password).
-> Αν ο αριθμός βγει 1 ή πιο συγκεκριμένα αν δεν βγει 0, τότε έχουμε αυθεντικοποιήσει τον χρήστη.
-> Σε κάθε άλλη ο χρήστης δεν θα αυθεντικοποιηθεί και επιστρέφεται μήνυμα λάθους

Αν αυθεντικοποιηθεί ο χρήστης, το username του περνάει σε μία συνάρτηση create_session και μέσα σε αυτή δημιουργείται ένα μοναδικό id (για το username) το οποίο αποθηκεύεται στην λίστα users_sessions. Το id αυτό μαζί με το username εκτυπωνονται στον χρήστη. 

## Task_3
### ΕΡΩΤΗΜΑ 3: Επιστροφή φοιτητή βάσει email
Πριν αναλύσουμε το ερώτημα αυτό θα εξηγήσουμε πλήρως πως ελέγχουμε την αυθεντικοποίηση του χρήστη καθώς στα επόμενα ερωτήματα που ζητάνε όλα αυθεντικοποίηση δεν το εξηγήσουμε εκ νέου αφού η υλοποίηση είναι η ίδια.

Στο ερώτημα αυτό ζητάμε αυθεντικοποίηση χρήστη, δηλαδή ο χρήστης να έχει κάνει login. Όπως αναφέραμε και στην υλοποίηση του login, μετά την επιτυχή εισαγωγή username και password μας επιστρέφεται ένα id που βρίσκεται στην λίστα users_sessions. Οπότε στα headers του request που έχει γίνει, βρίσκουμε αυτό το id. Έπειτα το περνάμε από την συνάρτηση is_session_valid που μας επιστρέφει αν το id είναι έγκυρο δηλαδή αν όντως έχει γίνει login.
Αν μας επιστρέψει True είναι έγκυρο και συνεχίζουμε με τα ζητούμενα του ερωτήματος αλλιώς τυπώνεται το μήνυμα "You haven't been authenticated" με status 401.

Αφού λοιπόν αυθεντικοποιήσουμε τον χρήστη ψάχουμε για κάποιον φοιτητή με το email που λάβαμε στα data του request. Χρησιμοιποιούμε την εντολή find_one καθώς ενδιαφερόμαστε για έναν μόνο φοιτητή. Το αποτέλεσμα της αναζήτησης αποθηκεύεται σε μια μεταβλήτή student.

-> Αν το student είναι None τότε σημαίνει πως δεν βρέθηκε κανένας με αυτό το mail. Οπότε επιστρέφεται το ανάλογο μήνυμα
-> Αν το student έχει δεδομένα τότε θα είναι ένα JSON με τα στοιχεία του μαθητή που έχει το mail που ψάχναμε. Θέτουμε το πεδίο \_id του student ίσο με None (αφού το \_id δείχνει σε Object και αυτό χαλάει την μορφή του JSON) και εκτυπώνεται στον χρήστη.

## Task_4
### ΕΡΩΤΗΜΑ 4: Επιστροφή όλων των φοιτητών που είναι 30 ετών
μπλα μπλα

## Task_5
### ΕΡΩΤΗΜΑ 5: Επιστροφή όλων των φοιτητών που είναι τουλάχιστον 30 ετών
μπλα μπλα

## Task_6
### ΕΡΩΤΗΜΑ 6: Επιστροφή φοιτητή που έχει δηλώσει κατοικία βάσει email
μπλα μπλα

## Task_7
### ΕΡΩΤΗΜΑ 7: Διαγραφή φοιτητή βάσει email
μπλα μπλα

## Task_8
### ΕΡΩΤΗΜΑ 8: Εισαγωγή μαθημάτων σε φοιτητή βάσει email
μπλα μπλα

## Task_9
### ΕΡΩΤΗΜΑ 9: Επιστροφή περασμένων μαθημάτων φοιτητή βάσει email
μπλα μπλα
